`timescale 1ns / 1ps
// Generated by CIRCT firtool-1.62.1-1-gdf5ed6ea5
// VCS coverage exclude_file
module mem_16x8(
  input  [3:0] R0_addr,
  input        R0_en,
               R0_clk,
  output [7:0] R0_data,
  input  [3:0] W0_addr,
  input        W0_en,
               W0_clk,
  input  [7:0] W0_data
);

  reg [7:0] Memory[0:15];
  reg       _R0_en_d0;
  reg [3:0] _R0_addr_d0;
  always @(posedge R0_clk) begin
    _R0_en_d0 <= R0_en;
    _R0_addr_d0 <= R0_addr;
  end // always @(posedge)
  always @(posedge W0_clk) begin
    if (W0_en & 1'h1)
      Memory[W0_addr] <= W0_data;
  end // always @(posedge)
  assign R0_data = _R0_en_d0 ? Memory[_R0_addr_d0] : 8'bx;
endmodule

module SyncRAMCore(
  input        clock,
  input  [3:0] io_addr,
  input  [7:0] io_dataIn,
  output [7:0] io_dataOut,
  input        io_en_we,
               io_en_re
);

  mem_16x8 mem_ext (
    .R0_addr (io_addr),
    .R0_en   (io_en_re),
    .R0_clk  (clock),
    .R0_data (io_dataOut),
    .W0_addr (io_addr),
    .W0_en   (io_en_we),
    .W0_clk  (clock),
    .W0_data (io_dataIn)
  );
endmodule

// external module BidirectionalBuffer

module FSMCSlaveRAMCore(
  input       clock,
              reset,
              io_ne,
              io_noe,
              io_nwe,
  input [3:0] io_addr,
  inout [7:0] io_data
);

  wire [7:0] _bi_buffer_dataIn;
  wire [7:0] _mem_io_dataOut;
  reg  [1:0] cnt;
  reg  [3:0] addrNext;
  wire       _GEN = cnt == 2'h0;
  wire       _GEN_0 = cnt == 2'h1;
  wire       _GEN_1 = cnt == 2'h2;
  wire       _GEN_2 = ~_GEN & _GEN_0;
  wire       _GEN_3 = ~io_ne & io_noe;
  wire       _GEN_4 = _GEN_1 & _GEN_3;
  wire       _GEN_5 = _GEN | _GEN_0;
  always @(posedge clock) begin
    if (reset) begin
      cnt <= 2'h0;
      addrNext <= 4'h0;
    end
    else if (_GEN) begin
      if (io_ne) begin
      end
      else begin
        cnt <= io_noe ? 2'h2 : 2'h1;
        addrNext <= io_addr;
      end
    end
    else begin
      automatic logic _GEN_6;
      _GEN_6 = io_ne | io_noe;
      if (_GEN_0 ? _GEN_6 : _GEN_1 & (io_ne | ~_GEN_3))
        cnt <= 2'h0;
      if (_GEN_0) begin
        if (~_GEN_6)
          addrNext <= io_addr;
      end
      else if (_GEN_4 & io_nwe)
        addrNext <= io_addr;
    end
  end // always @(posedge)
  SyncRAMCore mem (
    .clock      (clock),
    .io_addr    (_GEN | ~(_GEN_0 | _GEN_4) ? 4'h0 : addrNext),
    .io_dataIn  (_GEN_5 | ~(_GEN_1 & _GEN_3 & ~io_nwe) ? 8'h0 : _bi_buffer_dataIn),
    .io_dataOut (_mem_io_dataOut),
    .io_en_we   (~_GEN_5 & _GEN_4 & ~io_nwe),
    .io_en_re   (_GEN_2)
  );
  BidirectionalBuffer bi_buffer (
    .dataIO  (io_data),
    .dataIn  (_bi_buffer_dataIn),
    .dataOut (_GEN | ~_GEN_0 ? 8'h0 : _mem_io_dataOut),
    .oe      (_GEN_2)
  );
endmodule


// ----- 8< ----- FILE "./bidirectional_buffer.sv" ----- 8< -----

// Generated by CIRCT firtool-1.62.1-1-gdf5ed6ea5

module BidirectionalBuffer(
  inout  [7:0] dataIO,
  output [7:0] dataIn,
  input  [7:0] dataOut,
  input  oe
);
  
  // Tristate buffer
  assign dataIO = oe ? dataOut : 8'bz;
  
  // Always read from bus
  assign dataIn = dataIO;
  
endmodule
    

// ----- 8< ----- FILE "firrtl_black_box_resource_files.f" ----- 8< -----

bidirectional_buffer.sv
